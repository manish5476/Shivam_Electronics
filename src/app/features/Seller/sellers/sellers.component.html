<section class="body-font " [ngClass]="{'dark-mode': isDarkMode}">
  <div pFocusTrap class="container px-5 py-1 mx-auto flex flex-wrap">
    <div class="flex w-full mb-8 flex-wrap justify-between items-center">
      <h1 class="sm:text-3xl text-2xl font-medium title-font text-gray-900 dark:text-white lg:mb-0 mb-4 text-center">
        Seller Profile</h1>
      <button pButton pRipple type="button" icon="pi pi-moon" class="p-button-rounded p-button-text"
        (click)="toggleDarkMode()" [ngClass]="{'p-button-outlined': !isDarkMode}" tooltip="Toggle Dark Mode"
        tooltipPosition="bottom"></button>
    </div>
    <div class="flex flex-wrap md:-m-2 -m-1 w-full">
      <div class="w-full md:w-1/3 p-2 mx-auto">
        <div class="rounded-lg p-4 flex flex-col h-full profile-card shadow-md">
          <div class="profile-image-container">
            <img *ngIf="seller.prifile" [src]="seller.prifile" alt="Profile Image" class="profile-image">
            <i *ngIf="!seller.prifile" class="pi pi-user profile-icon"></i>
          </div>

          <button (click)="fileUploader.choose()" class="upload-button">
            <i class="pi pi-upload"></i> Upload
          </button>

          <p *ngIf="uploadStatus" class="upload-status">{{ uploadStatus }}</p>

          <div class="form-group" style="display:none;"> <label for="status" class="form-label">Status</label>
            <p-select id="status" [options]="statuses" [(ngModel)]="seller.status" placeholder="Select Status"
              class="w-full md:w-56"></p-select>
          </div>


        </div>
      </div>

      <div class="flex flex-wrap w-full md:w-2/3 p-2">
        <div class="md:p-2 p-1 w-full">
          <div class="form-card">
            <p-card header="Seller Information" styleClass="form-card-content">
              <div class="grid grid-cols-2 gap-4">
                <div class="form-group">
                  <label for="name" class="form-label">Seller Name</label>
                  <input id="name" type="text" pInputText class="form-input" [(ngModel)]="seller.name" required />
                </div>
                <div class="form-group">
                  <label for="shopname" class="form-label">Shop Name</label>
                  <input id="shopname" type="text" pInputText class="form-input" [(ngModel)]="seller.shopname"
                    required />
                </div>
              </div>
              <div class="grid grid-cols-1 gap-4">
                <div class="form-group">
                  <label for="address" class="form-label">Address</label>
                  <input id="address" type="text" pInputText class="form-input" [(ngModel)]="seller.address" required />
                </div>
              </div>
              <div class="grid grid-cols-2 gap-4">
                <div class="form-group">
                  <label for="gstin" class="form-label">GSTIN</label>
                  <p-keyFilter id="gstin" inputId="gstin_input" mask="99AAAAA9999A9Z9" [(ngModel)]="seller.gstin">
                    <input pInputText type="text" id="gstin_input" class="form-input" />
                  </p-keyFilter>
                </div>
                <div class="form-group">
                  <label for="pan" class="form-label">PAN</label>
                  <p-keyFilter id="pan" inputId="pan_input" mask="AAAAA9999A" [(ngModel)]="seller.pan">
                    <input pInputText type="text" id="pan_input" class="form-input" />
                  </p-keyFilter>
                </div>
              </div>
              <div class="grid grid-cols-1 gap-4">
                <div class="form-group">
                  <label for="contactNumber" class="form-label">Contact Number</label>
                  <p-keyFilter id="contactNumber" inputId="contactNumber_input" mask="9999999999"
                    [(ngModel)]="seller.contactNumber">
                    <input pInputText type="text" id="contactNumber_input" class="form-input" />
                  </p-keyFilter>
                </div>
              </div>
            </p-card>
          </div>


        </div>
      </div>


      <div class="flex flex-wrap w-full p-2">
        <div class="md:p-2 p-1 w-full">
          <button (click)="saveSeller()" class="save-button">Save Seller</button>
        </div>
      </div>
    </div>
  </div>
</section>


<p-fileUpload hidden #fileUploader name="image" url="http://localhost:4000/api/sellers/{{sellerId}}/profile-image"
  accept="image/*" maxFileSize="5000000" (onSelect)="handleFileSelect($event)" (onUpload)="handleFileUpload($event)"
  [auto]="true" [showUploadButton]="false" [showCancelButton]="false">
</p-fileUpload>