<div class="flex items-center gap-2">
  <p-select [(ngModel)]="customerId" [options]="customerIDDropdown" optionLabel="fullname" optionValue="_id"
    placeholder="Select Customer" class="w-full md:w-56">
  </p-select>
  <button (click)="getCustomerDetail()" class="p-button p-button-primary px-4 py-2">
    Find
  </button>
</div>
<div class="card dark:bg-white dark:text-gray">
  <p-card header="Customer Details" class="bg-white text-gray dark:bg-white dark:text-gray">
    <div class="mx-auto max-w-full px-2 py-2">
      <div class="mx-auto max-w-full text-center">
        <dl class="mt-8 grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5">
          <div class="flex flex-col rounded-lg border border-gray-200 px-6 py-8 text-center dark:border-gray-700">
            <dt class="order-last text-lg font-medium text-gray-500 dark:text-gray-400">Email</dt>
            <dd class="text-xl font-semibold text-gray dark:text-gray">{{ customer.fullname }}</dd>
          </div>
          <div class="flex flex-col rounded-lg border border-gray-200 px-6 py-8 text-center dark:border-gray-700">
            <dt class="order-last text-lg font-medium text-gray-500 dark:text-gray-400">Email</dt>
            <dd class="text-xl font-semibold text-gray dark:text-gray">{{ customer.email }}</dd>
          </div>

          <div class="flex flex-col rounded-lg border border-gray-200 px-6 py-8 text-center dark:border-gray-700">
            <dt class="order-last text-lg font-medium text-gray-500 dark:text-gray-400">Status</dt>
            <dd class="text-xl font-semibold text-gray dark:text-gray">{{ customer.status }}</dd>
          </div>

          <div class="flex flex-col rounded-lg border border-gray-200 px-6 py-8 text-center dark:border-gray-700">
            <dt class="order-last text-lg font-medium text-gray-500 dark:text-gray-400">Total Purchased</dt>
            <dd class="text-xl font-semibold text-gray dark:text-gray">{{ customer.totalPurchasedAmount |
              currency:'INR' }}</dd>
          </div>

          <div class="flex flex-col rounded-lg border border-gray-200 px-6 py-8 text-center dark:border-gray-700">
            <dt class="order-last text-lg font-medium text-gray-500 dark:text-gray-400">Remaining Amount</dt>
            <dd class="text-xl font-semibold text-gray dark:text-gray">{{ customer.remainingAmount | currency:
              'USD' }}
            </dd>
          </div>
        </dl>
      </div>
    </div>
    <!-- addres -->
    <!-- <div class="mt-4">
      <div class="grid grid-cols-1">
        <div class="bg-gray-100 dark:bg-white p-4 rounded-lg shadow-md">
          <p-card header="Personal Details" class="bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
              <div class="bg-gray-200 dark:bg-gray-700 p-4 rounded-lg shadow-md">
                <p-card header="Phone Numbers" class="bg-gray-300 dark:bg-gray-600 text-gray-800 dark:text-gray">
                  <div class="grid grid-cols-1 gap-4">
                    <div
                      class="grid grid-cols-3 gap-2 text-sm font-semibold border-b border-gray-400 dark:border-gray-500 pb-2">
                      <div>Number</div>
                      <div>Type</div>
                      <div>Primary</div>
                    </div>
                    <div *ngFor="let phone of customer.phoneNumbers; let i = index"
                      class="grid grid-cols-3 gap-2 items-center">
                      <div>{{ phone.number }}</div>
                      <div>{{ phone.type }}</div>
                      <div>
                        <p-checkbox [(ngModel)]="phone.primary" binary="true" [disabled]="true"></p-checkbox>
                      </div>
                    </div>
                  </div>
                </p-card>
              </div>
              <div class="bg-gray-200 dark:bg-gray-700 p-4 rounded-lg shadow-md">
                <p-card header="Addresses" class="bg-gray-300 dark:bg-gray-600 text-gray-800 dark:text-gray">
                  <div class="grid grid-cols-1 gap-4">
                    <div
                      class="grid grid-cols-7 gap-2 text-sm font-semibold border-b border-gray-400 dark:border-gray-500 pb-2">
                      <div>Street</div>
                      <div>City</div>
                      <div>State</div>
                      <div>ZIP Code</div>
                      <div>Country</div>
                      <div>Type</div>
                      <div>Default</div>
                    </div>
                    <div *ngFor="let address of customer.addresses; let i = index"
                      class="grid grid-cols-7 gap-2 items-center">
                      <div>{{ address.street }}</div>
                      <div>{{ address.city }}</div>
                      <div>{{ address.state }}</div>
                      <div>{{ address.zipCode }}</div>
                      <div>{{ address.country }}</div>
                      <div>{{ address.type }}</div>
                      <div>
                        <p-checkbox [(ngModel)]="address.isDefault" binary="true" [disabled]="true"></p-checkbox>
                      </div>
                    </div>
                  </div>
                </p-card>
              </div>
            </div>
          </p-card>
        </div>
      </div>
    </div> -->
    <!-- <div class="mt-4">
      <div class="bg-gray-100 dark:bg-gray-800 p-6 rounded-xl shadow-lg">
        <h2 class="text-xl font-semibold text-gray-800 dark:text-white">Personal Details</h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-4">
          Phone Numbers
          <div class="bg-gray-200 dark:bg-gray-700 p-5 rounded-xl shadow-md">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">📞 Phone Numbers</h3>
            <div class="space-y-3">
              <div
                class="flex justify-between items-center font-medium text-gray-600 dark:text-gray-300 border-b border-gray-300 dark:border-gray-500 pb-2">
                <span>Number</span>
                <span>Type</span>
                <span>Primary</span>
              </div>
              <div *ngFor="let phone of customer.phoneNumbers"
                class="flex justify-between items-center text-gray-700 dark:text-gray-200 border-b border-gray-300 dark:border-gray-600 pb-2">
                <span>{{ phone.number }}</span>
                <span class="px-2 py-1 rounded-md bg-gray-300 dark:bg-gray-600 text-sm">{{ phone.type }}</span>
                <p-checkbox [(ngModel)]="phone.primary" binary="true" [disabled]="true"></p-checkbox>
              </div>
            </div>
          </div>

          Addresses
          <div class="bg-gray-200 dark:bg-gray-700 p-5 rounded-xl shadow-md">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">🏠 Addresses</h3>
            <div class="space-y-3">
              <div
                class="grid grid-cols-7 font-medium text-gray-600 dark:text-gray-300 border-b border-gray-300 dark:border-gray-500 pb-2">
                <span>Street</span>
                <span>City</span>
                <span>State</span>
                <span>ZIP</span>
                <span>Country</span>
                <span>Type</span>
                <span>Default</span>
              </div>
              <div *ngFor="let address of customer.addresses"
                class="grid grid-cols-7 text-gray-700 dark:text-gray-200 border-b border-gray-300 dark:border-gray-600 pb-2">
                <span>{{ address.street }}</span>
                <span>{{ address.city }}</span>
                <span>{{ address.state }}</span>
                <span>{{ address.zipCode }}</span>
                <span>{{ address.country }}</span>
                <span class="px-2 py-1 rounded-md bg-gray-300 dark:bg-gray-600 text-sm">{{ address.type }}</span>
                <p-checkbox [(ngModel)]="address.isDefault" binary="true" [disabled]="true"></p-checkbox>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
 -->

    <div class="mt-4">
      <div class="bg-gray-900 text-white p-6 rounded-xl shadow-lg">
        <h2 class="text-xl font-semibold text-gray-100">Personal Details</h2>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-4">
          <!-- Phone Numbers -->
          <div class="bg-gray-800 p-5 rounded-xl shadow-md">
            <h3 class="text-lg font-semibold text-gray-100 mb-3">📞 Phone Numbers</h3>
            <div class="space-y-3">
              <div class="flex justify-between items-center font-medium text-gray-400 border-b border-gray-700 pb-2">
                <span>Number</span>
                <span>Type</span>
                <span>Primary</span>
              </div>
              <div *ngFor="let phone of customer.phoneNumbers"
                class="flex justify-between items-center text-gray-300 border-b border-gray-700 pb-2">
                <span>{{ phone.number }}</span>
                <span class="px-2 py-1 rounded-md bg-gray-700 text-sm">{{ phone.type }}</span>
                <p-checkbox [(ngModel)]="phone.primary" binary="true" [disabled]="true"></p-checkbox>
              </div>
            </div>
          </div>

          <!-- Addresses -->
          <div class="bg-gray-800 p-5 rounded-xl shadow-md">
            <h3 class="text-lg font-semibold text-gray-100 mb-3">🏠 Addresses</h3>
            <div class="space-y-3">
              <div class="grid grid-cols-7 font-medium text-gray-400 border-b border-gray-700 pb-2">
                <span>Street</span>
                <span>City</span>
                <span>State</span>
                <span>ZIP</span>
                <span>Country</span>
                <span>Type</span>
                <span>Default</span>
              </div>
              <div *ngFor="let address of customer.addresses"
                class="grid grid-cols-7 text-gray-300 border-b border-gray-700 pb-2">
                <span>{{ address.street }}</span>
                <span>{{ address.city }}</span>
                <span>{{ address.state }}</span>
                <span>{{ address.zipCode }}</span>
                <span>{{ address.country }}</span>
                <span class="px-2 py-1 rounded-md bg-gray-700 text-sm">{{ address.type }}</span>
                <p-checkbox [(ngModel)]="address.isDefault" binary="true" [disabled]="true"></p-checkbox>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>


    <!--  -->
    <div class="mt-4">
      <p-accordion value="0">
        <p-accordion-panel value="0">
          <p-accordion-header>
            <ng-template #toggleicon let-active="active">
              @if (active) {
              <i class="pi pi-minus"></i>
              } @else {
              <i class="pi pi-plus"></i>
              }
            </ng-template>
            <span class="flex items-center gap-2 w-full">
              <p-avatar image="https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png" shape="circle" />
              <span class="font-bold whitespace-nowrap">Cart Details</span>
            </span>
          </p-accordion-header>

          <p-accordion-content>
            <p-panel header="Cart Items">
              <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                <div *ngFor="let item of customer.cart.items"
                  class="relative block overflow-hidden rounded-lg border border-gray-200 p-4 sm:p-6 lg:p-8 shadow-lg">
                  <span
                    class="absolute inset-x-0 bottom-0 h-2 bg-gradient-to-r from-green-300 via-blue-500 to-purple-600"></span>
                  <div class="sm:flex sm:justify-between sm:gap-4">
                    <div>
                      <h2 class="text-lg font-bold text-blue-900 sm:text-xl">
                        {{ item.productId.title }}
                      </h2>
                      <p class="mt-1 text-xs font-medium text-white">
                        Price: {{ item.productId.price | currency : 'USD' }}
                      </p>
                    </div>

                    <div class="hidden sm:block sm:shrink-0">
                      <img
                        [src]="'https://images.unsplash.com/photo-1605721911519-3dfeb3be25e7?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=870&q=80'"
                        [alt]="item.productId.title" class="size-16 rounded-lg object-cover shadow-xs" />
                    </div>
                  </div>

                  <div class="mt-4">
                    <p class="text-sm text-pretty text-gray-500">
                      {{item.productId.description}}
                    </p>
                  </div>

                  <!-- Invoice Section -->
                  <div *ngIf="item.invoiceIds.length > 0" class="mt-4 border-t border-gray-300 pt-4">
                    <h4 class="text-sm font-bold text-gray-700">Invoices:</h4>
                    <ul class="mt-2 space-y-2">
                      <li *ngFor="let invoice of item.invoiceIds"
                        class="flex justify-between items-center text-sm text-white">
                        <span>{{ invoice.invoiceDate | date }}</span>
                        <span>{{ invoice.totalAmount | currency : 'USD' }}</span>
                        <p-tag [value]="invoice.status" [severity]="getStatusSeverity(invoice.status)" />
                        <i (click)="openInvoiceDialog(invoice._id)"
                          class="pi pi-file-pdf text-red-500 cursor-pointer"></i>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </p-panel>
          </p-accordion-content>
        </p-accordion-panel>
      </p-accordion>
    </div>

    <div class="mt-4">
      <p-accordion value="0">
        <p-accordion-panel value="0">
          <p-accordion-header>
            <ng-template #toggleicon let-active="active">
              @if (active) {
              <i class="pi pi-minus text-gray-300"></i>
              } @else {
              <i class="pi pi-plus text-gray-300"></i>
              }
            </ng-template>
            <span class="flex items-center gap-3 w-full text-gray-200">
              <p-avatar image="https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png" shape="circle" />
              <span class="font-bold text-lg">Payment History</span>
            </span>
          </p-accordion-header>

          <p-accordion-content>
            <p-panel header="Payment Transactions" class="bg-gray-900 shadow-md rounded-lg p-5 border border-gray-800">
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div *ngFor="let payment of customer.paymentHistory"
                  class="relative block overflow-hidden rounded-lg border border-gray-700 bg-gray-800 p-6 shadow-lg w-[420px]">
                  <span
                    class="absolute inset-x-0 bottom-0 h-1 bg-gradient-to-r from-green-400 via-blue-500 to-purple-500"></span>

                  <div class="flex justify-between items-center">
                    <h3 class="text-lg font-semibold text-gray-100">
                      Transaction ID:
                      <span class="text-gray-400 text-sm block">{{ payment.transactionId }}</span>
                    </h3>
                    <p-tag [value]="payment.status" [severity]="getStatusSeverity(payment.status)" />
                  </div>

                  <div class="mt-4 text-gray-300">
                    <p class="text-sm">
                      Amount:
                      <span class="font-bold text-white">{{ payment.amount | currency: 'USD' }}</span>
                    </p>
                    <p class="text-sm">
                      Date:
                      <span class="font-medium text-white">{{ payment.createdAt | date }}</span>
                    </p>
                  </div>
                </div>
              </div>
            </p-panel>
          </p-accordion-content>
        </p-accordion-panel>
      </p-accordion>
    </div>
  </p-card>
</div>

<p-dialog [(visible)]="display" modal="true" header="Detailed View (Invoice)" appendTo="body"
  [style]="{ width: '80vw', height: '80vh' }" [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }"
  [maximizable]="true">
  <ng-container *ngComponentOutlet="dynamicComponent; inputs: { Id: Id }"></ng-container> <ng-container
    *ngIf="!dynamicComponent">
    <div>
      <p>Loading component...</p>
    </div>
  </ng-container>
  <button pButton type="button" (click)="display = false" label="Close">Close</button>
</p-dialog>


<!-- 
<div class="mt-4">
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    Personal Details
    <div class="bg-gray-900 p-5 rounded-xl shadow-lg border border-gray-800">
      <h3 class="text-lg font-bold text-gray-200">Personal Details</h3>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-4">
        Phone Numbers
<div class="relative bg-gray-800 p-5 rounded-xl border border-gray-700 shadow-md">
  <h4 class="text-sm font-bold text-gray-300">Phone Numbers</h4>
  <span class="absolute inset-x-0 bottom-0 h-1 bg-gradient-to-r from-green-400 via-blue-500 to-purple-500"></span>

  <div class="mt-3 space-y-3">
    <div *ngFor="let phone of customer.phoneNumbers" class="flex justify-between items-center text-gray-200">
      <span>{{ phone.number }}</span>
      <span class="text-gray-400 text-sm">{{ phone.type }}</span>
      <p-checkbox [(ngModel)]="phone.primary" binary="true" [disabled]="true"></p-checkbox>
    </div>
  </div>
</div>

Addresses
<div class="relative bg-gray-800 p-5 rounded-xl border border-gray-700 shadow-md">
  <h4 class="text-sm font-bold text-gray-300">Addresses</h4>
  <span class="absolute inset-x-0 bottom-0 h-1 bg-gradient-to-r from-green-400 via-blue-500 to-purple-500"></span>

  <div class="mt-3 space-y-3">
    <div *ngFor="let address of customer.addresses" class="text-gray-200">
      <p>{{ address.street }}, {{ address.city }}</p>
      <p class="text-gray-400 text-sm">{{ address.state }}, {{ address.zipCode }}, {{ address.country }}</p>
      <p-checkbox [(ngModel)]="address.isDefault" binary="true" [disabled]="true"></p-checkbox>
    </div>
  </div>
</div>
</div>
</div>
</div>
</div>

Cart Details
<div class="mt-6">
  <p-accordion value="0">
    <p-accordion-panel value="0">
      <p-accordion-header>
        <ng-template #toggleicon let-active="active">
          @if (active) {
          <i class="pi pi-minus text-gray-300"></i>
          } @else {
          <i class="pi pi-plus text-gray-300"></i>
          }
        </ng-template>
        <span class="flex items-center gap-3 w-full text-gray-200">
          <p-avatar image="https://primefaces.org/cdn/primeng/images/demo/avatar/amyelsner.png" shape="circle" />
          <span class="font-bold text-lg">Cart Details</span>
        </span>
      </p-accordion-header>

      <p-accordion-content>
        <p-panel header="Cart Items" class="bg-gray-900 shadow-md rounded-lg p-5 border border-gray-800">
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div *ngFor="let item of customer.cart.items"
              class="relative block overflow-hidden rounded-lg border border-gray-700 bg-gray-800 p-6 shadow-lg w-[420px]">

              <span
                class="absolute inset-x-0 bottom-0 h-1 bg-gradient-to-r from-green-400 via-blue-500 to-purple-500"></span>

              <div class="flex justify-between items-center">
                <h3 class="text-lg font-semibold text-gray-100">
                  {{ item.productId.title }}
                </h3>
                <p-tag [value]="item.productId.price?item.productId.price:0 | currency: 'USD'" severity="info" />
              </div>

              <div class="mt-4 text-gray-300">
                <p class="text-sm text-gray-400">
                  {{ item.productId.description }}
                </p>
              </div>

              Invoice Section
              <div *ngIf="item.invoiceIds.length > 0" class="mt-4 border-t border-gray-700 pt-4">
                <h4 class="text-sm font-bold text-gray-400">Invoices:</h4>
                <ul class="mt-2 space-y-2">
                  <li *ngFor="let invoice of item.invoiceIds"
                    class="flex justify-between items-center text-sm text-gray-300">
                    <span>Invoice #{{ invoice.invoiceNumber }}</span>
                    <span>{{ invoice.invoiceDate | date }}</span>
                    <span>{{ invoice.totalAmount | currency : 'USD' }}</span>
                    <p-tag [value]="invoice.status" [severity]="getStatusSeverity(invoice.status)" />
                    <i (click)="openInvoiceDialog(invoice._id)" class="pi pi-file-pdf text-red-500 cursor-pointer"></i>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </p-panel>
      </p-accordion-content>
    </p-accordion-panel>
  </p-accordion>
</div>-->